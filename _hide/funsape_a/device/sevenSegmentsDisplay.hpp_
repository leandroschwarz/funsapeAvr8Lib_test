/**
 *******************************************************************************
 * @file            sevenSegmentsDisplay.hpp
 * @author          Leandro Schwarz (bladabuska+funsapeavr8lib@gmail.com)
 * @brief           Seven Segments Display module interface for the FunSAPE++
 *                      AVR8 Library.
 * @details         This file provides driver interface with the seven segments
 *                      display with support to both common anode and common
 *                      cathode displays. The following special characters were
 *                      also implemented: dash, H, i, j, L, n, O, P, q, r, S, t,
 *                      U, y, display off.
 * @date            2025-02-14
 * @version         25.02
 * @copyright       MIT License
 * @note            No notes at this time.
 * @todo            No itens in todo list yet.
 * @bug             No bugs detected yet.
 *
 *******************************************************************************
 * @attention
 *
 * MIT License
 *
 * Copyright (c) 2025 Leandro Schwarz
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 *      of this software and associated documentation files (the "Software"), to
 *      deal in the Software without restriction, including without limitation
 *      the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *      and/or sell copies of the Software, and to permit persons to whom the
 *      Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 *      all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *      IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *      FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 *      THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR
 *      OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
 *      ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 *      OTHER DEALINGS IN THE SOFTWARE.
 *
 *******************************************************************************
*/

// =============================================================================
// Include guard (START)
// =============================================================================

#ifndef __SEVEN_SEGMENTS_DISPLAY_HPP
#define __SEVEN_SEGMENTS_DISPLAY_HPP    2502

// =============================================================================
// Dependencies
// =============================================================================

//     /////////////////     GLOBAL DEFINITIONS FILE    /////////////////     //

#include "../globalDefines.hpp"
#if !defined(__GLOBAL_DEFINES_HPP)
#   error [sevenSegmentsDisplay.hpp] Error 1 - Header file (globalDefines.hpp) is missing or corrupted!
#elif __GLOBAL_DEFINES_HPP != __SEVEN_SEGMENTS_DISPLAY_HPP
#   error [sevenSegmentsDisplay.hpp] Error 2 - Build mismatch between file (sevenSegmentsDisplay.hpp) and global definitions file (globalDefines.hpp)!
#endif

//     //////////////////     LIBRARY DEPENDENCIES     //////////////////     //

// NONE

//     ///////////////////     STANDARD C LIBRARY     ///////////////////     //

// NONE

//     ////////////////////    AVR LIBRARY FILES     ////////////////////     //

// NONE

// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// Doxygen: Start main group "Devices"
// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
/**
 * @addtogroup      Devices
 * @brief           External devices.
 * @{
*/

// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// Doxygen: Start subgroup "Devices/Seven_Segments_Display"
// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
/**
 * @addtogroup      Seven_Segments_Display
 * @brief           Seven Segments Display controller module.
 * @{
*/

// =============================================================================
// Undefining previous definitions
// =============================================================================

// NONE

// =============================================================================
// Constant definitions
// =============================================================================

// NONE

// =============================================================================
// New data types
// =============================================================================

/**
 * @enum            SevenSegmentsCode
 * @brief           Seven segments code enumeration.
 * @details         Seven segments code enumeration.
*/
enum class SevenSegmentsCode : uint8_t {
    HEX_0           = 0,                //!< Hexadecimal number 0.
    HEX_1           = 1,                //!< Hexadecimal number 1.
    HEX_2           = 2,                //!< Hexadecimal number 2.
    HEX_3           = 3,                //!< Hexadecimal number 3.
    HEX_4           = 4,                //!< Hexadecimal number 4.
    HEX_5           = 5,                //!< Hexadecimal number 5.
    HEX_6           = 6,                //!< Hexadecimal number 6.
    HEX_7           = 7,                //!< Hexadecimal number 7.
    HEX_8           = 8,                //!< Hexadecimal number 8.
    HEX_9           = 9,                //!< Hexadecimal number 9.
    HEX_A           = 10,               //!< Hexadecimal number A.
    HEX_B           = 11,               //!< Hexadecimal number B.
    HEX_C           = 12,               //!< Hexadecimal number C.
    HEX_D           = 13,               //!< Hexadecimal number D.
    HEX_E           = 14,               //!< Hexadecimal number E.
    HEX_F           = 15,               //!< Hexadecimal number F.
    LETTER_A        = 'A',              //!< Letter A.
    LETTER_B        = 'B',              //!< Letter B.
    LETTER_C        = 'C',              //!< Letter C.
    LETTER_D        = 'D',              //!< Letter D.
    LETTER_E        = 'E',              //!< Letter E.
    LETTER_F        = 'F',              //!< Letter F.
    LETTER_H        = 'H',              //!< Letter H.
    LETTER_I        = 'i',              //!< Letter I.
    LETTER_J        = 'j',              //!< Letter J.
    LETTER_L        = 'L',              //!< Letter L.
    LETTER_N        = 'n',              //!< Letter N.
    LETTER_O        = 'O',              //!< Letter O.
    LETTER_P        = 'P',              //!< Letter P.
    LETTER_Q        = 'q',              //!< Letter Q.
    LETTER_R        = 'r',              //!< Letter R.
    LETTER_S        = 'S',              //!< Letter S.
    LETTER_T        = 't',              //!< Letter T.
    LETTER_U        = 'U',              //!< Letter U.
    LETTER_Y        = 'y',              //!< Letter Y.
    DASH            = '-',              //!< Dash.
    ON              = 0xFD,             //!< Display ON.
    OFF             = 0xFF              //!< Display OFF.
};

/**
 * @enum            SevenSegmentsDisplayType
 * @brief           Display hardware configuration.
 * @details         Display hardware configuration.
*/
enum class SevenSegmentsDisplayType : cbool_t {
    COMMON_ANODE    = false,            //!< Common anode displays; negative logic.
    COMMON_CATHODE  = true              //!< Common cathode displays; positive logic.
};

// =============================================================================
// Interrupt callback functions
// =============================================================================

// NONE

// =============================================================================
// Public functions declarations
// =============================================================================

/**
 * @brief           Converts a value to segments code.
 * @details         This function receives a numeric value @a numericValue_p and
 *                      decodes it to seven segments code, according to given
 *                      @a displayType_p display type, with decimal point
 *                      support given by @a point_p.
 * @param[in]       numericValue_p      Numeric value to be converted.
 * @param[in]       point_p             Decimal point status.
 * @param[in]       displayType_p       Display type, defaults to
 *                                          @ref SevenSegmentsDisplayType::COMMON_ANODE.
 * @return          Returns segments code in 0bPGFEDCBA format.
*/
uint8_t convertToSevenSegments(
        cuint8_t numericValue_p,
        cbool_t point_p,
        const SevenSegmentsDisplayType displayType_p = SevenSegmentsDisplayType::COMMON_ANODE
);

/**
 * @brief           Converts a value to segments code.
 * @details         This function receives a coded value @a codedValue_p and
 *                      decodes it to seven segments code, according to given
 *                      @a displayType_p display type, with decimal point
 *                      support given by @a point_p.
 * @param[in]       codedValue_p        Coded @ref SevenSegmentsCode value to be
 *                                          converted.
 * @param[in]       point_p             Decimal point status.
 * @param[in]       displayType_p       Display type, defaults to
 *                                          @ref SevenSegmentsDisplayType::COMMON_ANODE.
 * @return          Returns segments code in 0bPGFEDCBA format.
*/
uint8_t convertToSevenSegments(
        const SevenSegmentsCode codedValue_p,
        cbool_t point_p,
        const SevenSegmentsDisplayType displayType_p = SevenSegmentsDisplayType::COMMON_ANODE
);

// =============================================================================
// Classes
// =============================================================================

// NONE

// =============================================================================
// Inlined class functions
// =============================================================================

// NONE

// =============================================================================
// External global variables
// =============================================================================

// NONE

// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// Doxygen: End subgroup "Devices/Seven_Segments_Display"
// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
/**
* @}
*/

// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// Doxygen: End main group "Devices"
// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
/**
 * @}
*/

// =============================================================================
// Include guard (END)
// =============================================================================

#endif  // __SEVEN_SEGMENTS_DISPLAY_HPP

// =============================================================================
// End of file (sevenSegmentsDisplay.hpp)
// =============================================================================
